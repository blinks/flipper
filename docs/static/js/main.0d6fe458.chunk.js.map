{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["RESPONSES","yes","no","ok","STOP","Dialog","props","Card","border","type","Body","children","Footer","ButtonToolbar","className","options","DECK","MG","A","text","B","C","D","E","F","CORP","G","H","J","K","L","M","RD","N","P","Q","R","S","T","CR","U","V","W","X","Y","Z","App","useState","history","setHistory","factionKey","setFactionKey","deckState","setDeckState","card","setCard","index","setIndex","_nextCard","deck","length","es","i","j","Math","floor","random","shuffle","Object","keys","pop","evaluate","inst","choice","bytecode","humanize","console","log","push","inc","Error","_inc","dialog","k","opts","key","Button","variant","onClick","e","factionBtns","map","idx","f","Navbar","bg","Brand","Nav","Link","href","entry","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0d6fe458.chunk.js","sourcesContent":["import './App.css';\n\nimport React, { useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\n\n// Bootstrap components.\nimport Button from 'react-bootstrap/Button';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Card from 'react-bootstrap/Card';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\n\n// Possible responses to a dialog question, for cards.\nconst RESPONSES = {\n  yes: 'outline-success',\n  no: 'outline-danger',\n  ok: 'outline-secondary',\n};\n\n// Bytecode for what to do after a response. See interpreter at App.click.\n// any positive integer => increments the box by that much.\nconst NEXT_CARD = -1;\nconst STOP = -2;\nconst humanize = (bytecode) => {\n  switch (bytecode) {\n  case NEXT_CARD: return 'next card';\n  case STOP: return 'stop';\n  default: return `step ${bytecode}`;\n  }\n};\n\n// Fisher-Yates shuffle in-place implementation.\nfunction shuffle(es) {\n  for (var i = es.length - 1; i > 0; i--) {\n    var j = Math.floor(Math.random() * (i + 1));\n    [es[i], es[j]] = [es[j], es[i]];\n  }\n  return es;\n};\n\n// Encapsulated COIN bot interpreter.\nfunction App() {\n  let [history, setHistory] = useState([]);\n  const log = (text) => {\n    console.log(text);\n    history.push(text);\n    setHistory(history);\n  };\n  const renderHistory = () => {\n    return history.map((entry, index) => (<li key={index}>{entry}</li>));\n  };\n\n  let [factionKey, setFactionKey] = useState(null); // top-level faction key\n  let [deckState, setDeckState] = useState({}); // card index by faction.\n  let [card, setCard] = useState(null); // current card index\n  let [index, setIndex] = useState(0); // current instruction index\n\n  // Start using a faction.\n  const _start = (f) => { factionKey = f; setFactionKey(f); _nextCard(); };\n\n  // Draw the next card. (Shuffle and reset when we reach the end.)\n  const _nextCard = () => {\n    // Remaining cards in the persistent faction deck.\n    var deck = deckState[factionKey] || [];\n    if (!deck || deck.length === 0) {\n      deck = shuffle(Object.keys(DECK[factionKey]));\n    }\n    setIndex(0);\n    setCard(deck.pop());\n    deckState[factionKey] = deck;\n    setDeckState(deckState);\n  };\n\n  // Increment the current instruction.\n  // Throw if this takes us past the end of the card.\n  const _inc = (inc) => {\n    setIndex(index + inc);\n    if (index >= DECK[factionKey][card].length) {\n      throw new Error(\n        `Card ${factionKey}/${card} doesn't have ${index} boxes.`);\n    }\n  };\n\n  // Stop using a faction.\n  const _stop = () => {\n    setFactionKey(null); setCard(null); setIndex(0);\n  };\n\n  // Evaluate a bytecode instruction in-context.\n  const evaluate = (inst, choice) => {\n    const bytecode = inst[choice];\n    log(`${factionKey},${card},${index},` +\n        `${choice},${humanize(bytecode)}`);\n\n    switch (bytecode) {\n    case NEXT_CARD: _nextCard(); break;\n    case STOP: _stop(); break;\n    default: _inc(bytecode); break;\n    }\n  };\n\n  // If we have no faction, show faction dialog.\n  // Otherwise, show the current instruction's dialog.\n  var dialog = null;\n  if (!factionKey) {\n    const factionBtns = Object.keys(DECK).map(idx => (\n      <Button key={idx} onClick={(e) => _start(idx)}>{idx}</Button>\n    ));\n\n    dialog = (\n      <Dialog type=\"primary\" options={factionBtns}>Faction to act?</Dialog>\n    );\n  } else {\n    const inst = DECK[factionKey][card][index];\n    const opts = [];\n    for (var k in RESPONSES) {\n      const key = k;\n      if (inst[key]) {\n        opts.push(<Button key={key} variant={RESPONSES[key]}\n                  onClick={(e) => evaluate(inst, key)}>{key}</Button>);\n      }\n    }\n\n    dialog = (\n      <Dialog type={opts.length > 1 ? 'primary' : 'secondary'} options={opts}>\n        <ReactMarkdown children={inst.text} />\n      </Dialog>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <Navbar bg=\"light\">\n        <Navbar.Brand>Flipper</Navbar.Brand>\n        <Nav className=\"mr-auto\">\n          <Nav.Link href=\"https://github.com/blinks/flipper\">Source</Nav.Link>\n        </Nav>\n      </Navbar>\n      {dialog} <hr />\n      <ul>{renderHistory()}</ul>\n    </div>\n  );\n};\n\n// Consistent bot dialog box.\nfunction Dialog(props) {\n  return (\n    <Card border={props.type || 'secondary'}>\n      <Card.Body>{props.children}</Card.Body>\n      <Card.Footer>\n        <ButtonToolbar className=\"justify-content-between\">\n          {props.options}\n        </ButtonToolbar>\n      </Card.Footer>\n    </Card>\n  );\n};\n\nconst DECK = {\n  MG: {\n    A: [\n      { text: \"Die roll â‰¤ Available Troops?\",\n        yes: 1, no: NEXT_CARD },\n      { text: \"Cubes exceed all Active non-Base adversaries in any spaces?\",\n        yes: 1, no: 2 },\n      { text: \"#### Assault\\n- Select spaces using **Remove.**\", ok: STOP },\n      { text: \"Train.\", ok: STOP },\n    ],\n    B: [{ text: \"Train.\", ok: STOP }],\n    C: [{ text: \"Train.\", ok: STOP }],\n    D: [{ text: \"Secure.\", ok: STOP }],\n    E: [{ text: \"Recon.\", ok: STOP }],\n    F: [{ text: \"Assault.\", ok: STOP }],\n  },\n\n  CORP: {\n    G: [{ text: \"Logistics.\", ok: STOP }],\n    H: [{ text: \"Logistics.\", ok: STOP }],\n    J: [{ text: \"Logistics.\", ok: STOP }],\n    K: [{ text: \"Secure.\", ok: STOP }],\n    L: [{ text: \"Recon.\", ok: STOP }],\n    M: [{ text: \"Assault.\", ok: STOP }],\n  },\n  RD: {\n    N: [{ text: \"Rally.\", ok: STOP }],\n    P: [{ text: \"Rally.\", ok: STOP }],\n    Q: [{ text: \"Rally.\", ok: STOP }],\n    R: [{ text: \"March.\", ok: STOP }],\n    S: [{ text: \"Attack.\", ok: STOP }],\n    T: [{ text: \"Campaign.\", ok: STOP }],\n  },\n  CR: {\n    U: [{ text: \"Rally.\", ok: STOP }],\n    V: [{ text: \"Rally.\", ok: STOP }],\n    W: [{ text: \"Rally.\", ok: STOP }],\n    X: [{ text: \"Travel.\", ok: STOP }],\n    Y: [{ text: \"Attack.\", ok: STOP }],\n    Z: [{ text: \"Campaign.\", ok: STOP }],\n  },\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}